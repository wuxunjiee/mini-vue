{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer {\n  constructor(data) {\n    this.walk(data);\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]));\n  }\n}\n\nexport function defineReactive(target, key, value) {\n  observe(value);\n  Object.defineProperty(target, key, {\n    get() {\n      return value;\n    },\n    set(newVal) {\n      if (value === newVal) return;\n      value = newVal;\n    },\n  });\n}\n\nexport function observe(data) {\n  // 只对对象劫持\n  if (typeof data !== \"object\" || data === null) return;\n  // 如果一个对象被劫持过了，就不需要再被劫持了\n  // 判断一个对象是否被劫持过，添加增添一个实例，用实例来判断是否被劫持过\n  return new Observer(data);\n}\n","import { observe } from \"./observe\";\n\n/**\n *\n * @description 初始化data,props,computed等状态\n */\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initData(vm);\n  }\n}\n\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newVal) {\n      if (vm[target][key] === newVal) return;\n      vm[target][key] = newVal;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  vm._data = data;\n  observe(data);\n  for (const key in data) {\n    if (Object.hasOwnProperty.call(data, key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n}\n","import { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n  /**\n   * @description 初始化Vue\n   */\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options;\n    initState(vm);\n  };\n}\n","/**\n * @param options 用户的选项\n */\n\nimport { initMixin } from \"./init\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\n\nexport default Vue;\n"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","set","newVal","initState","vm","opts","$options","initData","proxy","call","_data","hasOwnProperty","initMixin","Vue","prototype","_init","options"],"mappings":"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"}